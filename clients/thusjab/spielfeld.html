<!DOCTYPE: html>
<html>
    <head>
        <meta charset="utf-8">
        <script type="text/javascript" src="common_lib/js/jquery.js"></script>
	    <script type="text/javascript" src="common_lib/js/kaboomen_consts.js"></script>
        <style>
            #spielfeld {position:relative;}
            .pic {position:absolute;}
            .tile {}
            .wall {}
            .ch1 {}
            .ch2 {background:url(alles.png)}
            .ch3 {}
        </style>
        <script>
            var lastRev = 0;
            var main = function(){
                /*global c,$*/
                var s = '';
                for (var zeile = 0; zeile < c.SET_HEIGHT; zeile++) {
                    for (var spalte = 0; spalte < c.SET_WIDTH; spalte++){
                        s += '<div id="'+zeile+'_'+spalte+'" class="pic" style="top:'+zeile*64+'px; left:'+spalte*64+'px"></div>';
                    }
                }
                $('#spielfeld').html(s);
                refresh();
                setInterval(refresh,100);
            };             var refresh = function(){
                $.getJSON('http://kaboomen.de:8082/standard/'+lastRev, datenErhalten);
            }
            var datenErhalten = function(spiel){
                lastRev = spiel.rev;
                for (var zeile = 0; zeile < c.SET_HEIGHT; zeile++){
                    for (var spalte = 0; spalte < c.SET_WIDTH; spalte++){
                        document.getElementById(zeile+'_'+spalte).innerHTML=spiel.map[zeile][spalte];
                    }
                }
            };
            $(document).ready(main);
        </script>
    </head>
    <body>
        <div id="spielfeld"></div>
    </body>
</html>